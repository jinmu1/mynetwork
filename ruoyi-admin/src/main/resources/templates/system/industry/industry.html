<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org" xmlns:shiro="http://www.pollix.at/thymeleaf/shiro">
<head>
	<th:block th:include="include :: header('EIQ分析')" />
<!--    <link href="../static/css/bootstrap-chosen.css" th:href="@{/css/bootstrap-chosen.css}" rel="stylesheet"/>-->
<!--    <link href="../static/css/select2.min.css" th:href="@{/css/select2.min.css}" rel="stylesheet"/>-->
    <script src="../static/js/jquery.min.js" th:src="@{/js/jquery.min.js}"></script>
    <script  th:src="@{/ajax/libs/artTemplate/template.min.js}"></script>
    <script src="../static/js/lang.core.js" th:src="@{/js/lang.core.js}"></script>
    <th:block th:include="include :: select2-css" />
    <th:block th:include="include :: bootstrap-select-css" />

</head>
<body class="gray-bg">
	<div class="row  border-bottom white-bg dashboard-header">
    </div>
    <div class="wrapper wrapper-content fadeInRight">
        <div class="p-w-md m-t-sm">
            <div class="row">
            <div class="col-lg-12">
                <div class="ibox ">
                    <div class="ibox-title">
                        <h5>各行业入库频次对比</h5>
                        <div class="ibox-tools">
                            <a class="collapse-link">
                                <i class="fa fa-chevron-up"></i>
                            </a>
                        </div>
                    </div>
                    <div class="ibox-content" style="position: relative;height: 400px" >
                        <div class="row">
                            <div class="col-lg-2" style="margin-top: 50px">
                                <div class="row">
                                    <div class="col-lg-6">
                                        <ul class="stat-list">
                                            <li>
                                                <big>峰值</big>
                                                <h3 class="no-margins" id="max2"></h3>
                                            </li>
                                            <li>
                                                <big>均值</big>
                                                <h3 class="no-margins" id="avg2"></h3>
                                            </li>
                                            <li>
                                                <big>谷值</big>
                                                <h3 class="no-margins " id="min2"></h3>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="col-lg-6">
                                        <ul class="stat-list">
                                            <li>
                                                <big>振幅</big>
                                                <h3 class="no-margins" id="amplitude2"></h3>
                                            </li>
                                            <li>
                                                <big>上浮</big>
                                                <h3 class="no-margins" id="up2"></h3>
                                            </li>
                                            <li>
                                                <big>下浮</big>
                                                <h3 class="no-margins " id="down2"></h3>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-10" >
                                <div class="flot-chart">
                                    <div class="spiner-example2">
                                        <div class="sk-spinner sk-spinner-wave">
                                            <div class="sk-rect1"></div>
                                            <div class="sk-rect2"></div>
                                            <div class="sk-rect3"></div>
                                            <div class="sk-rect4"></div>
                                            <div class="sk-rect5"></div>
                                        </div>
                                    </div>
                                    <div class="del" id="demo1" style="height: 300px"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
        </div>
    </div>
    <th:block th:include="include :: footer" />
    <th:block th:include="include :: echarts-js" />
    <th:block th:include="include :: select2-js" />
    <th:block th:include="include :: bootstrap-select-js" />
    <script  th:inline="javascript">
        var ctx = [[@{/}]];
           var report = ctx + "system/industry";
            var demo1 = echarts.init(document.getElementById('demo1'));
            var demo2 = echarts.init(document.getElementById('demo2'));
            var demo3 = echarts.init(document.getElementById('demo3'));
            var demo4 = echarts.init(document.getElementById('demo4'));

            $.post(prefix + "/bar1",function(result) {
                var d = result.rows;
                var data1 =[];
                var data2 =[];
                for(var i =0;i<d.length;i++){
                    data1.push(d[i].orderCode);
                    data2.push(d[i].goodsCode);
                }
                $("#max").html(Math.round(arrMaxNum2(data2)));
                $("#avg").html(Math.round(arrAverageNum2(data2)));
                $("#min").html(Math.round(arrMinNum2(data2)));
                $("#amplitude").html(Math.round(((arrMaxNum2(data2)-arrMinNum2(data2))*100/arrAverageNum2(data2)))+"%");
                $("#up").html(Math.round(((arrMaxNum2(data2)-arrAverageNum2(data2))*100/arrAverageNum2(data2)))+"%");
                $("#down").html(Math.round(((arrMinNum2(data2)-arrAverageNum2(data2))*100/arrAverageNum2(data2)))+"%");
                        var   option = {
                            backgroundColor:'rgba(255, 255, 255, 0)',
                            dataZoom : {
                                show : true,
                                realtime : true
                            },
                            legend: [
                                {
                                    left:'left',
                                    textStyle:{color:'#7f7f7f'},
                                    data:['物料量']
                                }
                            ],
                            toolbox: {
                                show: true,
                                feature : {
                                    mark : {show: true},
                                    dataView : {show: true, readOnly: false},
                                    magicType : {show: true, type: ['line', 'bar']},
                                    restore : {show: true},
                                    saveAsImage : {show: true}
                                }
                            },
                            xAxis:  {
                                type: 'category',
                                boundaryGap: false,
                                data: data1
                            },
                            yAxis: [{
                                type: 'value',
                                axisLabel: {
                                    formatter: '{value}个'
                                }
                            }],
                            series: [
                                {
                                    name:'物料量',
                                    type:'line',
                                    data:data2,
                                    smooth:true,
                                    symbol:'none',
                                    itemStyle : {
                                        normal : {
                                            color:'#39c7aa'
                                        }
                                    },
                                    markPoint: {
                                        color:'#39c7aa',
                                        data: [
                                            {type: 'max', name: '峰值'},
                                            {type: 'min', name: '谷值'}
                                        ]
                                    },
                                    markLine: {
                                        data: [
                                            {type: 'average', name: '均值'}
                                        ]
                                    }
                                }
                            ]
                        };
                        $('.spiner-example1').hide();
                        demo1.setOption(option);

            });

            $.post(prefix + "/goods/bar2", function(result) {
                    var d = result.rows;
                        var data1 =[];
                        var data2 =[];
                        for(var i = 0;i<d.length;i++){
                            data1.push(d[i].orderCode);
                            data2.push(d[i].goodsNum);
                        }
                        $("#max2").html(Math.round(arrMaxNum2(data2)));
                        $("#avg2").html(Math.round(arrAverageNum2(data2)));
                        $("#min2").html(Math.round(arrMinNum2(data2)));
                        $("#amplitude2").html(Math.round(((arrMaxNum2(data2)-arrMinNum2(data2))*100/arrAverageNum2(data2)))+"%");
                        $("#up2").html(Math.round(((arrMaxNum2(data2)-arrAverageNum2(data2))*100/arrAverageNum2(data2)))+"%");
                        $("#down2").html(Math.round(((arrMinNum2(data2)-arrAverageNum2(data2))*100/arrAverageNum2(data2)))+"%");
                        var   option = {
                            backgroundColor:'rgba(255, 255, 255, 0)',
                            dataZoom : {
                                show : true,
                                realtime : true
                            },
                            legend: [
                                {
                                    left:'left',
                                    textStyle:{color:'#7f7f7f'},
                                    data:['订购次数下的物料种类']
                                }
                            ],
                            toolbox: {
                                show: true,
                                feature : {
                                    mark : {show: true},
                                    dataView : {show: true, readOnly: false},
                                    magicType : {show: true, type: ['line', 'bar']},
                                    restore : {show: true},
                                    saveAsImage : {show: true}
                                }
                            },
                            xAxis:  {
                                type: 'category',
                                boundaryGap: false,
                                data: data1
                            },
                            yAxis: {
                                type: 'value',
                                axisLabel: {
                                    formatter: '{value}'
                                }
                            },
                            series: [{
                                name:'订购次数下的物料种类',
                                type:'line',
                                data:data2,
                                smooth:true,
                                symbol:'none',
                                itemStyle : {
                                    normal : {
                                        color:'#39c7aa'
                                    }
                                },
                                markPoint: {
                                    color:'#39c7aa',
                                    data: [
                                        {type: 'max', name: '峰值'},
                                        {type: 'min', name: '谷值'}
                                    ]
                                },
                                markLine: {
                                    data: [
                                        {type: 'average', name: '均值'}
                                    ]
                                }
                            }
                            ]
                        };
                        $('.spiner-example2').hide();
                        demo2.setOption(option);

            });
            $.post(prefix + "/goods/bar3", function(result) {
                    var d = result.rows;
                        var data1 =[];
                        var data2 =[];
                        for(var i = 0;i<d.length;i++){
                            data1.push(d[i].orderCode);
                            data2.push(d[i].goodsNum);
                        }

                        $("#max3").html(Math.round(arrMaxNum2(data2)));
                        $("#avg3").html(Math.round(arrAverageNum2(data2)));
                        $("#min3").html(Math.round(arrMinNum2(data2)));
                        $("#amplitude3").html(Math.round(((arrMaxNum2(data2)-arrMinNum2(data2))*100/arrAverageNum2(data2)))+"%");
                        $("#up3").html(Math.round(((arrMaxNum2(data2)-arrAverageNum2(data2))*100/arrAverageNum2(data2)))+"%");
                        $("#down3").html(Math.round(((arrMinNum2(data2)-arrAverageNum2(data2))*100/arrAverageNum2(data2)))+"%");
                        var colors = ['#5793f3', '#d14a61','#475bd1','#5d33d1'];

                        var   option = {
                            backgroundColor:'rgba(255, 255, 255, 0)',
                            dataZoom : {
                                show : true,
                                realtime : true
                            },
                            legend: [
                                {
                                    left:'left',
                                    textStyle:{color:'#7f7f7f'},
                                    data:['物料出库量']
                                }
                            ],
                            toolbox: {
                                show: true,
                                feature : {
                                    mark : {show: true},
                                    dataView : {show: true, readOnly: false},
                                    magicType : {show: true, type: ['line', 'bar']},
                                    restore : {show: true},
                                    saveAsImage : {show: true}
                                }
                            },
                            xAxis:  {
                                type: 'category',
                                boundaryGap: false,
                                data: data1
                            },
                            yAxis: {
                                type: 'value',
                                axisLabel: {
                                    formatter: '{value}个'
                                }
                            },
                            series: [
                                {
                                    name:'物料出库量',
                                    type:'line',
                                    data:data2,
                                    smooth:true,
                                    symbol:'none',
                                    itemStyle : {
                                        normal : {
                                            color:'#39c7aa'
                                        }
                                    },
                                    markPoint: {
                                        color:'#39c7aa',
                                        data: [
                                            {type: 'max', name: '峰值'},
                                            {type: 'min', name: '谷值'}
                                        ]
                                    },
                                    markLine: {
                                        data: [
                                            {type: 'average', name: '均值'}
                                        ]
                                    }
                                }
                            ]
                        };
                        $('.spiner-example3').hide();
                        demo3.setOption(option);


            });
            $.post(prefix + "/goods/bar4", function(result) {
                    var d = result.rows;
                        var data1 =[];
                        var data2 =[];
                        for(var i = 0;i<d.length;i++){
                            data1.push(d[i].orderCode);
                            data2.push(d[i].goodsNum);
                        }
                $("#max4").html(Math.round(arrMaxNum2(data2)));
                $("#avg4").html(Math.round(arrAverageNum2(data2)));
                $("#min4").html(Math.round(arrMinNum2(data2)));
                $("#amplitude4").html(Math.round(((arrMaxNum2(data2)-arrMinNum2(data2))*100/arrAverageNum2(data2)))+"%");
                $("#up4").html(Math.round(((arrMaxNum2(data2)-arrAverageNum2(data2))*100/arrAverageNum2(data2)))+"%");
                $("#down4").html(Math.round(((arrMinNum2(data2)-arrAverageNum2(data2))*100/arrAverageNum2(data2)))+"%");
                        var   option = {
                            backgroundColor:'rgba(255, 255, 255, 0)',
                            dataZoom : {
                                show : true,
                                realtime : true
                            },
                            legend: [
                                {
                                    left:'left',
                                    textStyle:{color:'#7f7f7f'},
                                    data:['物料数']
                                }
                            ],
                            toolbox: {
                                show: true,
                                feature : {
                                    mark : {show: true},
                                    dataView : {show: true, readOnly: false},
                                    magicType : {show: true, type: ['line', 'bar']},
                                    restore : {show: true},
                                    saveAsImage : {show: true}
                                }
                            },
                            xAxis:  {
                                type: 'category',
                                boundaryGap: false,
                                data: data1
                            },
                            yAxis: {
                                type: 'value',
                                axisLabel: {
                                    formatter: '{value}'
                                }
                            },
                            series: [
                                {
                                    name:'物料数',
                                    type:'line',
                                    data:data2,
                                    smooth:true,
                                    symbol:'none',
                                    itemStyle : {
                                        normal : {
                                            color:'#39c7aa'
                                        }
                                    },
                                    markPoint: {
                                        color:'#39c7aa',
                                        data: [
                                            {type: 'max', name: '峰值'},
                                            {type: 'min', name: '谷值'}
                                        ]
                                    },
                                    markLine: {
                                        data: [
                                            {type: 'average', name: '均值'}
                                        ]
                                    }
                                }
                            ]
                        };
                        $('.spiner-example4').hide();
                demo4.setOption(option);

            });



            // $.post(prefix + "/order/bar10", {"action": 3},function(result) {
            //          var d= result;
            //     $("#average_value1").html(d.average_value);
            //     $("#min_value1").html(d.min_value);
            //     $("#max_value1").html(d.max_value);
            //     $("#range1").html(d.range);
            //     $("#median1").html(d.median);
            //     $("#mode1").html(d.modes1);
            //     $("#kurtosis1").html(d.kurtosis);
            //     $("#skewness1").html(d.skewness);
            //     $("#standard_deviation1").html(d.standard_deviation);
            //     $("#standard_error1").html(d.standard_error);
            // });
            // $.post(prefix + "/order/bar11", {"action": 3},function(result) {
            //     var d= result;
            //     $("#average_value2").html(d.average_value);
            //     $("#min_value2").html(d.min_value);
            //     $("#max_value2").html(d.max_value);
            //     $("#range2").html(d.range);
            //     $("#median2").html(d.median);
            //     $("#mode2").html(d.modes1);
            //     $("#kurtosis2").html(d.kurtosis);
            //     $("#skewness2").html(d.skewness);
            //     $("#standard_deviation2").html(d.standard_deviation);
            //     $("#standard_error2").html(d.standard_error);
            // });
            function arrMaxNum2(arr) {
                return Math.max.apply(null, arr);
            }
            function arrMinNum2(arr) {
                return Math.min.apply(null, arr);
            }
            function arrAverageNum2(arr) {
                var len = arr.length;
                var sum = 0;
                for(var i = 0;i<len;i++){
                    sum +=parseFloat(arr[i]);
                }
                return Math.round(sum/len,1);
            }
            function formatDate(data) {
                return Date.format(new Date(data), "yyyy-MM-dd");
            }
            function formatTime(data) {
                return Date.format(new Date(data), "HH:mm:ss");
            }
    </script>

</body>
</html>